<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Roblox Hub</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 20px;
      text-align: center;
      color: #333;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      max-width: 600px;
      margin: 20px auto;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    img.avatar {
      border-radius: 50%;
      margin-bottom: 15px;
    }
    h1 {
      margin: 0;
      font-size: 28px;
    }
    p {
      font-size: 16px;
      color: #555;
    }
    .game-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }
    .game-card {
      background: #fff;
      border-radius: 8px;
      width: 150px;
      padding: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      transition: 0.2s;
    }
    .game-card:hover {
      transform: scale(1.03);
    }
    .game-card img {
      width: 100%;
      border-radius: 6px;
    }
  </style>
</head>
<body>

<div class="card" id="profile">
  <img class="avatar" id="avatar" src="" width="100" height="100">
  <h1 id="username">Loading...</h1>
  <p id="desc">Fetching profile...</p>
  <p id="status"></p>
</div>

<div class="card">
  <h2>My Games</h2>
  <div class="game-list" id="games"></div>
</div>

<script>
  const userId = 3690340936;

  async function fetchProfile() {
    const [user, avatar, status] = await Promise.all([
      fetch(`https://users.roproxy.com/v1/users/${userId}`).then(res => res.json()),
      fetch(`https://thumbnails.roproxy.com/v1/users/avatar?userIds=${userId}&size=420x420&format=Png&isCircular=true`).then(res => res.json()),
      fetch(`https://presence.roproxy.com/v1/presence/users`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ userIds: [userId] })
      }).then(res => res.json())
    ]);

    document.getElementById("username").textContent = user.name;
    document.getElementById("desc").textContent = user.description || "No description set.";
    document.getElementById("avatar").src = avatar.data[0].imageUrl;

    const presence = status.userPresences[0];
    document.getElementById("status").textContent =
      presence.userPresenceType === 2 ? `Currently playing: ${presence.lastLocation}` :
      "Offline";
  }

  async function fetchGames() {
    const res = await fetch(`https://games.roproxy.com/v2/users/${userId}/games?limit=6&sortOrder=Asc`);
    const data = await res.json();
    const gameContainer = document.getElementById("games");

    for (const game of data.data) {
      const thumbRes = await fetch(`https://thumbnails.roproxy.com/v1/places/thumbnails?placeIds=${game.id}&size=480x270&format=png`);
      const thumbData = await thumbRes.json();
      const imgURL = thumbData.data[0]?.imageUrl;

      const div = document.createElement("div");
      div.className = "game-card";
      div.innerHTML = `
        <a href="https://www.roblox.com/games/${game.id}" target="_blank">
          <img src="${imgURL}" alt="${game.name}">
          <p>${game.name}</p>
        </a>
      `;
      gameContainer.appendChild(div);
    }
  }

  fetchProfile();
  fetchGames();
</script>

</body>
</html>
